---
sidebar_position: 1
---

# Основная информация

Параметрами запуска называется тот список параметров, который передается
нативным приложением Telegram приложению TWA. Он помогает разработчику узнать
характеристики приложения Telegram, текущего устройства, получить
базовую информацию о пользователе и многое другое.

## Способ передачи

Несложно догадаться, но в веб-окружении одним из самых простых и мгновенных
локальных способов передачи данных является указание их в адресной
строке приложения. Таким образом и вызываемый сервер и загружаемое приложение
будут иметь какие-либо заранее известные данные. Собственно, этим же
способом пользуется и технология Telegram Web Apps.

Нативное приложение Telegram передает список этих параметров в 2-ух частях
URL:

1. В хеше (`#`), хранятся в `window.location.hash`;
2. В query-параметрах (`?`), хранятся в `window.location.search`.

## Извлечение

Важно помнить про то, что как query-параметры, так и хеш адреса являются
строковыми свойствами, в то время как Telegram передаёт целый список свойств.
Исходя из этого встаёт вопрос о том, каким образом нативное приложение Telegram
приводит этот список к строке.

На самом деле, всё достаточно просто. Параметры запуска разделяются на 2
списка, но каждый из них передаётся в одном и том же виде. Каждый из них
представляет собой query-параметры, приведённые к строке. Соответственно,
для того, чтобы извлечь параметры запуска, достаточно провести следующую
операцию:

```typescript title="Пример извлечения параметров запуска"
const search = window.location.search.slice(1);
const hash = window.location.hash.slice(1);

console.log(search); // tgWebAppStartParam=...
console.log(hash); // tgWebAppData=...&tgWebAppVersion=6.2&...

const searchParams = new URLSearchParams(search);
console.log(searchParams.get('tgWebAppStartParam')); // "my-command"

const hashParams = new URLSearchParams(hash);
console.log(hashParams.get('tgWebAppVersion')); // "6.2"
```

## Список параметров

В этом разделе представлен список параметров, отправляемых нативным приложением
Telegram приложению TWA.

### `window.location.search`

#### `tgWebAppStartParam`

В этот параметр передаётся значение query-параметра `startattach` в случае,
если приложение открывается в контексте бота Telegram:

```
https://t.me/mybot?startattach=command
```

Также, в этом параметре может содержаться значение из query-параметра
`startapp` в случае, если приложение TWA открывается в контексте одного из
приложений бота Telegram:

```
https://t.me/mybot/myapp?startapp=command
```

### `window.location.hash`

#### `tgWebAppVersion`

Текущая версия Telegram Web Apps, используемая нативным приложением. Этот
параметр важно использовать, например, перед вызовом
[методов](../apps-communication/methods.mdx) для того, чтобы убедиться, что
текущая
версия платформы поддерживает вызываемый метод.

#### `tgWebAppData`

Данные инициализации приложения TWA. Содержат информацию о текущем пользователе,
подпись
параметров, а также некоторые другие полезные значения. Подробнее об
этом значении можно прочитать в отдельной [секции](init-data.mdx).

Этот параметр передается как query-параметры приведенные к строке, поэтому для
того, чтобы получить более удобное для использования значение, необходимо
использовать конструктор `URLSearchParams`:

```typescript title="Пример обработанного значения"
const initData = new URLSearchParams(hashParams.get('tgWebAppData'));

// query_id: 'abcdef'
// user: `{id: 1, first_name: "Peris", last_name: "Hilton", username: "peris", language_code: "en", is_premium: true}`
// auth_date: '1669670292'
// hash: '4975e881a0347264512f6047e1f3d698cbd2fe0bc1573'
```

#### `tgWebAppPlatform`

Идентификатор [приложения Telegram](../supported-applications). Может 
использоваться как фактор, определяющий визуальный стиль приложения,
например, когда в зависимости от устройства разработчику необходимо отображать
компоненты отличные визуально.

#### `tgWebAppThemeParams`

Параметры [темы](../ui/theme-params.mdx) нативного приложения Telegram. Этот
параметр может быть использован для стилизации приложения ещё на моменте
отрисовки загрузчика (лоадера).

Значением этого параметра является объект JSON, приведённый к строке. Для
получения более удобного для использования значения достаточно использовать
метод `JSON.parse`.

```typescript title="Пример обработанного значения"
const theme = JSON.parse(hashParams.get('tgWebAppThemeParams'));

// {
//   "bg_color": "#212121",
//   "text_color": "#ffffff",
//   "hint_color": "#aaaaaa",
//   "link_color": "#8774e1",
//   "button_color": "#8774e1",
//   "button_text_color": "#ffffff",
//   "secondary_bg_color": "#0f0f0f"
// }
```

:::tip

Параметры темы можно также получить через
отдельный [метод](../apps-communication/methods.mdx#web_app_request_theme).

:::

#### `tgWebAppBotInline`

Значение, которое сигнализирует приложению TWA о запуске в inline-режиме.
К примеру, при помощи кнопки клавиатуры (KeyboardButton), либо при запуске
приложения из чата.

Принимает значение `1`.
