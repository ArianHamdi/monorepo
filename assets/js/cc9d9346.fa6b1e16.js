"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[750],{7522:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(9901);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),d=s(n),h=i,m=d["".concat(p,".").concat(h)]||d[h]||u[h]||o;return n?a.createElement(m,l(l({ref:t},c),{},{components:n})):a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,l=new Array(o);l[0]=h;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[d]="string"==typeof e?e:i,l[1]=r;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5997:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>s});var a=n(3223),i=(n(9901),n(7522));const o={},l="Creating new app",r={unversionedId:"guides/creating-new-app",id:"guides/creating-new-app",title:"Creating new app",description:"In this article, we will delve into the process of developing a new application on the",source:"@site/docs/guides/creating-new-app.md",sourceDirName:"guides",slug:"/guides/creating-new-app",permalink:"/docs/guides/creating-new-app",draft:!1,editUrl:"https://github.com/twa-dev/docs/tree/master/docs/guides/creating-new-app.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Test environment",permalink:"/docs/test-environment"},next:{title:"@twa-dev/bridge",permalink:"/docs/libraries/twa-dev-bridge"}},p={},s=[{value:"Before starting",id:"before-starting",level:2},{value:"Creating application in BotFather",id:"creating-application-in-botfather",level:2},{value:"Web application link",id:"web-application-link",level:2},{value:"For development",id:"for-development",level:3},{value:"Ngrok",id:"ngrok",level:4},{value:"Localtunnel",id:"localtunnel",level:4},{value:"For production",id:"for-production",level:3},{value:"Applying link",id:"applying-link",level:3},{value:"Menu button",id:"menu-button",level:4},{value:"Direct link",id:"direct-link",level:4},{value:"Additional",id:"additional",level:2},{value:"Hot Module Replacement",id:"hot-module-replacement",level:3}],c={toc:s},d="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"creating-new-app"},"Creating new app"),(0,i.kt)("p",null,"In this article, we will delve into the process of developing a new application on the\nTelegram Web Apps platform, we will find out exactly what actions need to be performed to create it,\nas well as give advice on improving the process of creating an application."),(0,i.kt)("p",null,"The process of creating an application usually consists of the following basic steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Creating Telegram bot and registering TWA application."),(0,i.kt)("li",{parentName:"ol"},"Creating web application."),(0,i.kt)("li",{parentName:"ol"},"Getting web application URL and setting it in TWA settings.")),(0,i.kt)("h2",{id:"before-starting"},"Before starting"),(0,i.kt)("p",null,"Before creating a new TWA application, you need to remember an important rule:\n",(0,i.kt)("em",{parentName:"p"},"do not create entities related to development in the production environment"),". Development\nwithin the production environment is a sign of bad taste, so use it strictly if you can't avoid it."),(0,i.kt)("p",null,"To create an application we should use test environment. You can learn more about switch to\nthe test environment in ",(0,i.kt)("a",{parentName:"p",href:"/docs/test-environment"},"this")," article."),(0,i.kt)("p",null,"Speaking of advantages a developer gets from the test environment, it is important to mention\nan opportunity of usage of ",(0,i.kt)("inlineCode",{parentName:"p"},"http")," links instead of ",(0,i.kt)("inlineCode",{parentName:"p"},"https"),", as well as IPs directly. Production\nenvironments allows usage only valid ",(0,i.kt)("inlineCode",{parentName:"p"},"https")," links."),(0,i.kt)("h2",{id:"creating-application-in-botfather"},"Creating application in BotFather"),(0,i.kt)("p",null,"As long as technically, TWA applications are connected with Telegram bots, we should firstly create\na Telegram bot. To do this, you need to find the father of all\nbots, the bot ",(0,i.kt)("a",{parentName:"p",href:"https://t.me/botfather"},"BotFather")," and use the command\n",(0,i.kt)("inlineCode",{parentName:"p"},"/newbot"),", then go through the proposed process, specifying all the necessary data."),(0,i.kt)("p",null,"When the bot is created, it is required then to use the command ",(0,i.kt)("inlineCode",{parentName:"p"},"/newapp")," and again go\nthrough the procedure of creating another entity - the Telegram Web Apps application,\nlinking it to the Telegram bot. From now on, the created application will\nbe available via a direct link of the form ",(0,i.kt)("inlineCode",{parentName:"p"},"https://t.me/{mybot}/{myapp}"),"."),(0,i.kt)("h2",{id:"web-application-link"},"Web application link"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Before reading this section, make sure that you have already created a frontend application\nthat can be accessed via a direct link.")),(0,i.kt)("p",null,"This step is mandatory in the process of creating a TWA application. Due to the fact\nthat TWA applications are web applications, the most common way\nto get and display applications is to download them at some URL and\nthen render them."),(0,i.kt)("p",null,"As mentioned earlier, in the production environment, it is allowed to use\nonly links that have the ",(0,i.kt)("inlineCode",{parentName:"p"},"https")," protocol with a valid SSL certificate. Otherwise, users' devices\nwill not be able to download the application. In the test environment, both ",(0,i.kt)("inlineCode",{parentName:"p"},"http")," links and direct\nIP addresses can be used."),(0,i.kt)("p",null,"Given the fact that links in the production environment and for development are different,\nwe will consider the process of obtaining them separately."),(0,i.kt)("h3",{id:"for-development"},"For development"),(0,i.kt)("h4",{id:"ngrok"},"Ngrok"),(0,i.kt)("p",null,"Many newcomers to development may often have a question about how\neasy it is to get a temporary URL for development that works on the ",(0,i.kt)("inlineCode",{parentName:"p"},"https")," protocol\nand has a valid SSL certificate. The solution to this problem is quite simple and common, developers\ncan use such a service as ",(0,i.kt)("a",{parentName:"p",href:"https://ngrok.com/"},"ngrok"),". It has low development limits and allows you\nto create applications comfortably."),(0,i.kt)("p",null,"Imagine that the application being developed is currently running at\n`localhost:3000'. Then in order to open a tunnel to this\napplication, you need to use the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Example of getting a link"',title:'"Example',of:!0,getting:!0,a:!0,'link"':!0},"ngrok http 3000\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Do not use the provided ngrok link in the production environment.\nFrontend applications should be a set of static files and be\nuploaded to some hosting. The link to the application should not be\ndynamic, since in this case it will have to be constantly changed in BotFather.")),(0,i.kt)("h4",{id:"localtunnel"},"Localtunnel"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/localtunnel/localtunnel"},"Localtunnel")," is another similar technology that\nprovides a valid ",(0,i.kt)("inlineCode",{parentName:"p"},"https")," link."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Example of getting a link"',title:'"Example',of:!0,getting:!0,a:!0,'link"':!0},"lt --port 3000 -s web-apps-test\n# your url is: https://web-apps-test.loca.lt\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"The main problem of this project is disabling the tunnel in case\nthe development server has been disabled.")),(0,i.kt)("h3",{id:"for-production"},"For production"),(0,i.kt)("p",null,"Getting a production link is also not difficult. To do this, you can use the popular free static\nservices:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://pages.github.com/"},"GitHub Pages")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.heroku.com/"},"Heroku")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://vercel.com/"},"Vercel"))),(0,i.kt)("p",null,"However, the developer can also use any other hosting. It is important to remember that the link to\nthe application must work on the ",(0,i.kt)("inlineCode",{parentName:"p"},"https")," protocol and have a valid SSL certificate. To get a free\none, consider ","[certbot]","(https://cert bat.eff.org /)."),(0,i.kt)("h3",{id:"applying-link"},"Applying link"),(0,i.kt)("p",null,"When an https link is received, it must be used in a previously created Telegram bot. Telegram\nsupports several ways to install this link:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"For the bot menu button"),'. Then every user who will enter a dialogue with the bot will be able\nto open its "menu" in the form of a developed application.'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"For TWA application"),". Then the application will open only if the user\nfollows the link in format ",(0,i.kt)("inlineCode",{parentName:"li"},"https://t.me/{mybot}/{myapp}"),". In this case, user can avoid joining\na dialogue with the bot.")),(0,i.kt)("h4",{id:"menu-button"},"Menu button"),(0,i.kt)("p",null,"To set the link on the menu button, you need to go to the dialog with BotFather and use\nthe command (send a message) ",(0,i.kt)("inlineCode",{parentName:"p"},"/setmenubutton"),". Next, BotFather will ask you to select a bot, specify\na link, as well as a title for the menu button."),(0,i.kt)("p",null,"As a result, when a user enters a chat with a bot, he will be able to open a web application by\nclicking on the menu button on the bottom left in the interface."),(0,i.kt)("h4",{id:"direct-link"},"Direct link"),(0,i.kt)("p",null,"To install a direct link to the application, you must complete the following steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Send the BotFather command ",(0,i.kt)("inlineCode",{parentName:"li"},"/myapps"),"."),(0,i.kt)("li",{parentName:"ol"},"Select the required application."),(0,i.kt)("li",{parentName:"ol"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Edit link")," and install a new link.")),(0,i.kt)("p",null,"Now when the user clicks on the format link ",(0,i.kt)("inlineCode",{parentName:"p"},"https://t.me/{mybot}/{myapp}"),", Telegram\nwill display the web component with the source address as the URL specified in the settings."),(0,i.kt)("h2",{id:"additional"},"Additional"),(0,i.kt)("h3",{id:"hot-module-replacement"},"Hot Module Replacement"),(0,i.kt)("p",null,"The application development process is a fairly complex and lengthy process.\nYou always want to see the changes you make in the code right away on the screen. In order\nto see the changes in real time, it is necessary to use\nsuch a technique as ",(0,i.kt)("strong",{parentName:"p"},"Hot Module Replacement"),". This section will not cover\nthe process of setting it up, as it often depends on the project, but well-known\nframeworks already include this functionality by default."),(0,i.kt)("p",null,"How to configure HMR can be found\nin ",(0,i.kt)("a",{parentName:"p",href:"https://webpack.js.org/guides/hot-module-replacement/"},"this Webpack article"),"."))}u.isMDXComponent=!0}}]);