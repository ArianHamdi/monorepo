# `Viewport`

Компонент, который содержит информацию о вьюпорте устройства, его размерах и состоянии.

## Инициализация

```typescript  
import { Viewport } from '@twa.js/sdk';
  
// Указываем высоту, ширину, стабильную высоту, а так же статус
// раскрытия вьюпорта.
const viewport = new Viewport(390, 365, 300, false);
```  

## Размеры

Экземпляр `Viewport` содержит информацию о размерах вьюпорта. Для того чтобы узнать текущие высоту и ширину, достаточно обратиться к свойствам `height` и `width`.

Нативное приложение Telegram может отображать только верхнюю часть приложения разработчика, при этом его нижняя часть будет находиться за пределами экрана устройства. В этом положении пользователь может "потянуть" веб-приложение и растянуть его до максимально возможной высоты. Разработчика может выполнить аналогичное действие при помощи вызова метода `expand()`. Для получения актуального состояния раскрытия можно использовать свойство `isExpanded`.

В процессе раскрытия приложения, значения свойств `height` и `width` могут изменяться. Тем не менее стоит учитывать, что частоты обновления этих свойств не будет достаточно для гладких анимаций, связанных с высотой видимой области. По этой причине стоит обратить внимание на свойство `stableHeight`, которое содержит информацию о последней стабильной высоте.

## Запрос актуальных данных

Для получения актуальных данных вьюпорта, разработчик может использовать статичный метод `request()`:

```typescript
import { Viewport } from '@twa.js/sdk';

Viewport.request().then(console.log);

// Вывод:
// { height: 122, isExpanded: false, width: 375, isStateStable: true }
```

## Создание синхронизированного экземпляра

Класс `Viewport` имеет возможность создания экземпляра, свойства которого будут синхронизированы с их актуальным состоянием в приложении Telegram. Для получения такого экземпляра используется статичный метод `synced()`:

```typescript
import { Viewport } from '@twa.js/sdk';

const viewport = await Viewport.synced();

console.log(viewport.height); // 390
console.log(viewport.stableHeight); // 300
console.log(viewport.width); // 365
console.log(viewport.isExpanded); // false
console.log(viewport.isStable); // false
```

Синхронизированный экземпляр содержит актуальные значения всех параметров. Также отметим, что этот экземпляр автоматически обновляется в случае, если связанные с ним данные меняются в приложении Telegram.

## События

<ComponentSupportedEvents events={{
  heightChanged: '(height: number) => void',
  isExpandedChanged: '(isExpanded: boolean) => void',
  stableHeightChanged: '(stableHeight: number) => void',
  widthChanged: '(width: number) => void',
}} />
